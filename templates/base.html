<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{% block title %}SMP Admin{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.21.13/dist/css/uikit.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.21.13/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.21.13/dist/js/uikit-icons.min.js"></script>
    <style>
      :root {
        --smp-primary: #1e73be;
      }
      .uk-navbar-container {
        background: #fff;
        border-bottom: 1px solid #e5e5e5;
      }
      .smp-logo {
        white-space: nowrap;
        font-weight: 600;
      }
      .smp-auth-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .uk-card {
        border: 1px solid #eaeaea;
      }
      .uk-button-primary,
      .uk-badge-primary,
      .uk-subnav-pill > .uk-active > a {
        background-color: var(--smp-primary);
      }
      .uk-button-primary:focus,
      .uk-button-primary:hover {
        background-color: #155b92;
      }
      body {
        background: #f8fafc;
      }
      @media (max-width: 959px) {
        .smp-logo {
          font-size: 1.7rem;
        }
      }
    </style>
  </head>
  <body>
    <nav class="uk-navbar-container">
      <div class="uk-container">
        <div class="uk-navbar" uk-navbar>
          <div class="uk-navbar-left">
            <a class="uk-navbar-item uk-logo smp-logo" href="{% url 'home' %}">SMP Console</a>
            {% if user.is_authenticated %}
            <ul class="uk-navbar-nav uk-visible@m">
              <li><a href="{% url 'subscriptions:dashboard' %}">Dashboard</a></li>
              <li><a href="{% url 'subscriptions:provider-list' %}">Providers</a></li>
              <li><a href="{% url 'subscriptions:billingcycle-list' %}">Billing Cycles</a></li>
              <li><a href="{% url 'subscriptions:subscription-list' %}">Subscriptions</a></li>
              <li><a href="{% url 'subscriptions:notificationrule-list' %}">Notifications</a></li>
              <li><a href="{% url 'subscriptions:renewalevent-list' %}">Renewals</a></li>
            </ul>
            {% endif %}
          </div>
          <div class="uk-navbar-right">
            {% if user.is_authenticated %}
            <form class="uk-visible@m" method="post" action="{% url 'logout' %}">
              {% csrf_token %}
              <button class="uk-button uk-button-text uk-text-bold" type="submit">Logout</button>
            </form>
            {% else %}
            <div class="smp-auth-actions uk-visible@m">
              <a class="uk-button uk-button-default" href="{% url 'signup' %}">Sign up</a>
              <a class="uk-button uk-button-primary" href="{% url 'login' %}">Sign in</a>
            </div>
            {% endif %}
            <a class="uk-navbar-toggle uk-hidden@m" href="#mobile-nav" uk-toggle>
              <span uk-navbar-toggle-icon></span>
            </a>
          </div>
        </div>
      </div>
    </nav>
    <div id="mobile-nav" uk-offcanvas="overlay: true; flip: true">
      <div class="uk-offcanvas-bar">
        <button class="uk-offcanvas-close" type="button" uk-close></button>
        <h3 class="uk-margin-remove-top">SMP Console</h3>
        {% if user.is_authenticated %}
        <ul class="uk-nav uk-nav-default uk-margin-top">
          <li><a href="{% url 'subscriptions:dashboard' %}">Dashboard</a></li>
          <li><a href="{% url 'subscriptions:provider-list' %}">Providers</a></li>
          <li><a href="{% url 'subscriptions:billingcycle-list' %}">Billing Cycles</a></li>
          <li><a href="{% url 'subscriptions:subscription-list' %}">Subscriptions</a></li>
          <li><a href="{% url 'subscriptions:notificationrule-list' %}">Notifications</a></li>
          <li><a href="{% url 'subscriptions:renewalevent-list' %}">Renewals</a></li>
        </ul>
        <form method="post" action="{% url 'logout' %}" class="uk-margin-top">
          {% csrf_token %}
          <button class="uk-button uk-button-default uk-width-1-1" type="submit">Logout</button>
        </form>
        {% else %}
        <div class="uk-grid-small uk-margin-top" uk-grid>
          <div class="uk-width-1-1">
            <a class="uk-button uk-button-primary uk-width-1-1" href="{% url 'login' %}">Sign in</a>
          </div>
          <div class="uk-width-1-1">
            <a class="uk-button uk-button-default uk-width-1-1" href="{% url 'signup' %}">Sign up</a>
          </div>
        </div>
        {% endif %}
      </div>
    </div>

    <main class="uk-section">
      <div class="uk-container">
        {% if messages %}
        <div class="uk-margin">
          {% for message in messages %}
          <div class="uk-alert-primary" uk-alert>
            <a class="uk-alert-close" uk-close></a>
            <p>{{ message }}</p>
          </div>
          {% endfor %}
        </div>
        {% endif %}
        {% block content %}{% endblock %}
      </div>
    </main>
  </body>
</html>
